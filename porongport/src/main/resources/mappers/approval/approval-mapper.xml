<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="approvalMapper">
	<resultMap id="approvalResultSet" type="approval">
		<result column="VCT_NO" property="vctNo" />
		<result column="EDMS_CATEGORY" property="edmsCategory" />
		<result column="VCT_KIND" property="vctKind" />
		<result column="VCT_START" property="vctStart" />
		<result column="VCT_END" property="vctEnd" />
		<result column="VCT_REASON" property="vctReason" />
		<result column="EMP_NO" property="empNo" />
 	</resultMap>
 	
 
 	
 	
 	<!-- 조직도 조회 -->
	<select id="selectOrganiztion" resultMap="approvalResultSet">
		SELECT
		      DEPT_CODE deptCode 
		      ,DEPT_NAME deptName
		      ,JOB_CODE jobCode
		      ,JOB_NAME jobName
		      ,EMP_NO 
		      ,EMP_NAME empName
		  FROM
		      EMPLOYEE
		  LEFT
		  JOIN
		      DEPARTMENT USING (DEPT_CODE)
          LEFT
		  JOIN
		      JOB USING (JOB_CODE)
		<if test="deptCode == 'HR'">
		 WHERE
		      DEPT_CODE = 'HR'
		</if>
		<if test="deptCode == 'PD'">
		 WHERE
		      DEPT_CODE = 'PD'
		</if>
		<if test="deptCode == 'PM'">
		 WHERE
		      DEPT_CODE = 'PM'	
		</if>
	</select>
	
	<select id="selectOrganiztionChart" resultMap="approvalResultSet">
		SELECT
		      DEPT_CODE deptCode 
		      ,DEPT_NAME deptName
		      ,JOB_CODE jobCode
		      ,JOB_NAME jobName
		      ,EMP_NO 
		      ,EMP_NAME empName
		  FROM
		      EMPLOYEE
		  LEFT
		  JOIN
		      DEPARTMENT USING (DEPT_CODE)
          LEFT
		  JOIN
		      JOB USING (JOB_CODE)
		<if test="deptCode == '인사부'">
		 WHERE
		      DEPT_CODE = 'HR'
		</if>
		<if test="deptCode == '구매관리부'">
		 WHERE
		      DEPT_CODE = 'PD'
		</if>
		<if test="deptCode == '영업부'">
		 WHERE
		      DEPT_CODE = 'PM'	
		</if>
	</select>
 	
 		<select id="selectApprover" resultMap="approvalResultSet">
		SELECT
		      DEPT_CODE deptCode 
		      ,DEPT_NAME deptName
		      ,JOB_CODE jobCode
		      ,JOB_NAME jobName
		      ,EMP_NO 
		      ,EMP_NAME empName
		  FROM
		      EMPLOYEE
		  LEFT
		  JOIN
		      DEPARTMENT USING (DEPT_CODE)
          LEFT
		  JOIN
		      JOB USING (JOB_CODE)
		<if test="deptCode == '인사부'">
		 WHERE
		      DEPT_CODE = 'HR'
		</if>
		<if test="deptCode == '구매관리부'">
		 WHERE
		      DEPT_CODE = 'PD'
		</if>
		<if test="deptCode == '영업부'">
		 WHERE
		      DEPT_CODE = 'PM'	
		</if>
	</select>
	

	

</mapper>